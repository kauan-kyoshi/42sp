<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Permutations - (42 Escola)</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6; color: #333; background: #f4f7f6; padding: 20px;
        }
        .container {
            max-width: 900px; margin: auto; background: white; padding: 30px;
            border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50; text-align: center; border-bottom: 3px solid #3498db;
            padding-bottom: 15px; margin-bottom: 30px;
        }
        h2 {
            color: #e74c3c; margin-top: 30px; margin-bottom: 15px;
            border-left: 4px solid #e74c3c; padding-left: 15px;
        }

        .func-card {
            background: #f8f9fa; border: 2px solid #dee2e6;
            padding: 20px; margin: 20px 0; border-radius: 8px;
        }

        .code-container {
            background: #282c34; border-radius: 8px; margin: 15px 0;
            overflow: hidden;
        }
        pre {
            margin: 0; padding: 20px; color: #abb2bf;
            font-family: 'Consolas', 'Monaco', monospace; font-size: 14px;
            line-height: 1.6; overflow-x: auto;
        }

        .comment { color: #5c6370; font-style: italic; }
        .keyword { color: #c678dd; }
        .function { color: #61afef; }
        .highlight { background: #fff59d; padding: 2px 6px; border-radius: 3px; }

        .explanation {
            background: #e3f2fd; border-left: 4px solid #2196f3;
            padding: 15px; margin: 15px 0; border-radius: 4px;
        }

        ol, ul { margin-left: 25px; margin-top: 10px; }
        li { margin: 8px 0; }

        @media (max-width: 600px) {
            body { padding: 10px; }
            .container { padding: 15px; }
            pre { font-size: 12px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîÄ Permutations - Solu√ß√£o com Rota√ß√£o</h1>

        <h2>üìã Enunciado</h2>
        <div class="explanation">
            <strong>Tarefa:</strong> Criar programa que imprime todas as permuta√ß√µes de uma string em ordem alfab√©tica.<br>
            <strong>Entrada:</strong> Uma string sem caracteres duplicados<br>
            <strong>Sa√≠da:</strong> Todas as permuta√ß√µes, uma por linha, em ordem alfab√©tica
        </div>

        <h2>üéØ Estrat√©gia da Solu√ß√£o</h2>
        <ol>
            <li><strong>Ordenar</strong> a string primeiro (garante ordem alfab√©tica)</li>
            <li><strong>Rotacionar</strong> caracteres para gerar permuta√ß√µes</li>
            <li><strong>Recurs√£o</strong> para fixar cada caractere na posi√ß√£o inicial</li>
            <li><strong>Backtrack</strong> desfazendo a rota√ß√£o ap√≥s cada recurs√£o</li>
        </ol>

        <h2>üìù C√≥digo Completo</h2>
        <div class="code-container">
<pre>
<span class="keyword">#include</span> &lt;unistd.h&gt;

<span class="keyword">void</span> <span class="function">sort</span>(<span class="keyword">char</span> *str, <span class="keyword">int</span> len);
<span class="keyword">void</span> <span class="function">rotate</span>(<span class="keyword">char</span> *str, <span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">int</span> reverse);
<span class="keyword">void</span> <span class="function">solve</span>(<span class="keyword">char</span> *str, <span class="keyword">int</span> start, <span class="keyword">int</span> end);

<span class="keyword">int</span> <span class="function">main</span>(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)
{
    <span class="keyword">char</span> *arg;
    <span class="keyword">int</span> len;

    <span class="keyword">if</span> (argc != 2)
        <span class="keyword">return</span> (1);
    arg = argv[1];
    len = 0;
    <span class="keyword">while</span> (arg[len])
        len++;
    sort(arg, len);
    solve(arg, 0, len - 1);
    <span class="keyword">return</span> (0);
}

<span class="keyword">void</span> <span class="function">solve</span>(<span class="keyword">char</span> *str, <span class="keyword">int</span> start, <span class="keyword">int</span> end)
{
    <span class="keyword">int</span> i;

    <span class="keyword">if</span> (start == end)
    {
        i = 0;
        <span class="keyword">while</span> (str[i])
            write(1, &str[i++], 1);
        write(1, <span class="string">"\n"</span>, 1);
        <span class="keyword">return</span>;
    }
    i = start;
    <span class="keyword">while</span> (i &lt;= end)
    {
        rotate(str, start, i, 0);
        solve(str, start + 1, end);
        rotate(str, start, i, 1);
        i++;
    }
}

<span class="keyword">void</span> <span class="function">rotate</span>(<span class="keyword">char</span> *str, <span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">int</span> reverse)
{
    <span class="keyword">char</span> tmp;
    <span class="keyword">int</span> i;

    <span class="keyword">if</span> (!reverse)
    {
        tmp = str[end];
        i = end;
        <span class="keyword">while</span> (i > start)
        {
            str[i] = str[i - 1];
            i--;
        }
        str[start] = tmp;
    }
    <span class="keyword">else</span>
    {
        tmp = str[start];
        i = start;
        <span class="keyword">while</span> (i &lt; end)
        {
            str[i] = str[i + 1];
            i++;
        }
        str[end] = tmp;
    }
}

<span class="keyword">void</span> <span class="function">sort</span>(<span class="keyword">char</span> *str, <span class="keyword">int</span> len)
{
    <span class="keyword">char</span> tmp;
    <span class="keyword">int</span> i;
    <span class="keyword">int</span> j;

    i = 0;
    <span class="keyword">while</span> (i &lt; len - 1)
    {
        j = i + 1;
        <span class="keyword">while</span> (j &lt; len)
        {
            <span class="keyword">if</span> (str[i] > str[j])
            {
                tmp = str[i];
                str[i] = str[j];
                str[j] = tmp;
            }
            j++;
        }
        i++;
    }
}
</pre>
        </div>

        <h2>üîß Fun√ß√£o: main()</h2>
        <div class="func-card">
            <strong>Objetivo:</strong> Ponto de entrada, valida argumentos e inicia o processo

            <div class="code-container">
<pre>
<span class="keyword">int</span> <span class="function">main</span>(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)
{
    <span class="keyword">char</span> *arg;
    <span class="keyword">int</span> len;

    <span class="keyword">if</span> (argc != 2)        <span class="comment">// Verifica se recebeu 1 argumento</span>
        <span class="keyword">return</span> (1);

    arg = argv[1];
    len = 0;
    <span class="keyword">while</span> (arg[len])      <span class="comment">// Calcula tamanho da string</span>
        len++;

    sort(arg, len);         <span class="comment">// 1. Ordena alfabeticamente</span>
    solve(arg, 0, len - 1); <span class="comment">// 2. Gera permuta√ß√µes</span>

    <span class="keyword">return</span> (0);
}
</pre>
            </div>

            <div class="explanation">
                <strong>Fluxo:</strong>
                <ol>
                    <li>Valida que recebeu exatamente 1 argumento</li>
                    <li>Calcula o tamanho da string</li>
                    <li>Ordena a string (garantir ordem alfab√©tica)</li>
                    <li>Chama solve() para gerar todas as permuta√ß√µes</li>
                </ol>
            </div>
        </div>

        <h2>üîß Fun√ß√£o: sort()</h2>
        <div class="func-card">
            <strong>Objetivo:</strong> Ordenar a string em ordem alfab√©tica (bubble sort)

            <div class="code-container">
<pre>
<span class="keyword">void</span> <span class="function">sort</span>(<span class="keyword">char</span> *str, <span class="keyword">int</span> len)
{
    <span class="keyword">char</span> tmp;
    <span class="keyword">int</span> i, j;

    i = 0;
    <span class="keyword">while</span> (i &lt; len - 1)
    {
        j = i + 1;
        <span class="keyword">while</span> (j &lt; len)
        {
            <span class="keyword">if</span> (str[i] > str[j])  <span class="comment">// Compara e troca se necess√°rio</span>
            {
                tmp = str[i];
                str[i] = str[j];
                str[j] = tmp;
            }
            j++;
        }
        i++;
    }
}
</pre>
            </div>

            <div class="explanation">
                <strong>Como funciona:</strong>
                <ul>
                    <li>Compara cada caractere com todos os seguintes</li>
                    <li>Se encontrar um menor, troca de posi√ß√£o</li>
                    <li>Ao final, a string est√° em ordem alfab√©tica</li>
                </ul>
                <strong>Exemplo:</strong> "cba" ‚Üí "abc"
            </div>
        </div>

        <h2>üîß Fun√ß√£o: rotate()</h2>
        <div class="func-card">
            <strong>Objetivo:</strong> Rotacionar caracteres entre duas posi√ß√µes

            <div class="code-container">
<pre>
<span class="keyword">void</span> <span class="function">rotate</span>(<span class="keyword">char</span> *str, <span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">int</span> reverse)
{
    <span class="keyword">char</span> tmp;
    <span class="keyword">int</span> i;

    <span class="keyword">if</span> (!reverse)  <span class="comment">// Rota√ß√£o para frente</span>
    {
        tmp = str[end];       <span class="comment">// Salva √∫ltimo caractere</span>
        i = end;
        <span class="keyword">while</span> (i > start)
        {
            str[i] = str[i - 1];  <span class="comment">// Desloca todos para direita</span>
            i--;
        }
        str[start] = tmp;     <span class="comment">// Coloca o √∫ltimo no in√≠cio</span>
    }
    <span class="keyword">else</span>  <span class="comment">// Rota√ß√£o reversa (desfaz)</span>
    {
        tmp = str[start];     <span class="comment">// Salva primeiro caractere</span>
        i = start;
        <span class="keyword">while</span> (i &lt; end)
        {
            str[i] = str[i + 1];  <span class="comment">// Desloca todos para esquerda</span>
            i++;
        }
        str[end] = tmp;       <span class="comment">// Coloca o primeiro no fim</span>
    }
}
</pre>
            </div>

            <div class="explanation">
                <strong>Exemplo visual:</strong>
                <ul>
                    <li><code>rotate("abc", 0, 2, 0)</code> ‚Üí "cab" (move 'c' para in√≠cio)</li>
                    <li><code>rotate("cab", 0, 2, 1)</code> ‚Üí "abc" (desfaz)</li>
                </ul>
                <strong>Diferen√ßa do swap:</strong> Mant√©m ordem relativa dos outros caracteres!
            </div>
        </div>

        <h2>üîß Fun√ß√£o: solve()</h2>
        <div class="func-card">
            <strong>Objetivo:</strong> Gerar todas as permuta√ß√µes usando recurs√£o e backtracking

            <div class="code-container">
<pre>
<span class="keyword">void</span> <span class="function">solve</span>(<span class="keyword">char</span> *str, <span class="keyword">int</span> start, <span class="keyword">int</span> end)
{
    <span class="keyword">int</span> i;

    <span class="keyword">if</span> (start == end)  <span class="comment">// Caso base: chegou ao fim</span>
    {
        i = 0;
        <span class="keyword">while</span> (str[i])
            write(1, &str[i++], 1);
        write(1, <span class="string">"\n"</span>, 1);
        <span class="keyword">return</span>;
    }

    i = start;
    <span class="keyword">while</span> (i &lt;= end)
    {
        rotate(str, start, i, 0);  <span class="comment">// 1. Rotaciona</span>
        solve(str, start + 1, end);  <span class="comment">// 2. Recurs√£o</span>
        rotate(str, start, i, 1);  <span class="comment">// 3. Desfaz (backtrack)</span>
        i++;
    }
}
</pre>
            </div>

            <div class="explanation">
                <strong>L√≥gica:</strong>
                <ol>
                    <li><strong>Caso base:</strong> Se start == end, imprime a permuta√ß√£o</li>
                    <li><strong>Loop:</strong> Para cada posi√ß√£o de start at√© end:
                        <ul>
                            <li>Rotaciona para trazer caractere i para posi√ß√£o start</li>
                            <li>Chama recursivamente para o restante (start+1 at√© end)</li>
                            <li>Desfaz a rota√ß√£o (backtrack) para pr√≥xima itera√ß√£o</li>
                        </ul>
                    </li>
                </ol>

                <strong>Exemplo com "abc":</strong>
                <ul>
                    <li>i=0: "abc" ‚Üí solve("abc", 1, 2) ‚Üí imprime "abc", "acb"</li>
                    <li>i=1: "bac" ‚Üí solve("bac", 1, 2) ‚Üí imprime "bac", "bca"</li>
                    <li>i=2: "cab" ‚Üí solve("cab", 1, 2) ‚Üí imprime "cab", "cba"</li>
                </ul>
            </div>
        </div>

        <h2>üéØ Pontos-Chave para Memorizar</h2>
        <ol>
            <li><span class="highlight">sort()</span> primeiro - garante ordem alfab√©tica</li>
            <li><span class="highlight">rotate()</span> mant√©m ordem relativa - √© isso que faz funcionar</li>
            <li><span class="highlight">reverse=0</span> rotaciona, <span class="highlight">reverse=1</span> desfaz</li>
            <li>Sempre <strong>desfazer</strong> a rota√ß√£o ap√≥s a recurs√£o (backtrack)</li>
            <li>Use <span class="highlight">write()</span>, nunca printf</li>
        </ol>

        <div style="text-align: center; margin-top: 30px; padding: 20px; background: #e8f5e9; border-radius: 8px;">
            <h2 style="color: #27ae60;">‚úÖ Solu√ß√£o Completa e Verificada</h2>
            <p style="margin-top: 10px;">Boa sorte no exame! üöÄ</p>
        </div>
    </div>
</body>
</html>
